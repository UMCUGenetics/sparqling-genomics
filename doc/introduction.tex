\chapter{Getting started}

\section{Prerequisites}
\label{sec:prerequisites}

  In addition to the tools provided by this project, a RDF store is required.
  In the manual we use \href{https://virtuoso.openlinksw.com/}{Virtuoso}, but
  \href{https://github.com/4store/4store}{4store},
  \href{https://www.blazegraph.com/}{BlazeGraph}, or
  \href{https://allegrograph.com/}{AllegroGraph} may also be used.

  Before we can use the programs provided by this project, we need to build
  them first.

  The build system needs \href{https://www.gnu.org/software/autoconf}{GNU Autoconf},
  \href{https://www.gnu.org/software/automake}{GNU Automake},
  \href{https://www.gnu.org/software/make}{GNU Make} and
  \href{https://www.freedesktop.org/wiki/Software/pkg-config/}{pkg-config}.
  Additionally, for building the documentation, a working \LaTeX{} distribution is
  required including the \texttt{pdflatex} program.  Because \LaTeX{} distributions
  are rather large, this is optional.

  Each component in the repository has its own dependencies.  Table
  \ref{table:dependencies} provides an overview for each tool.

  \hypersetup{urlcolor=black}
  \begin{table}[H]
    \begin{tabularx}{\textwidth}{ X X X X }
      \headrow
      \textbf{vcf2rdf} & \textbf{table2rdf} & \textbf{Web interface} & \textbf{Documentation}\\
      \evenrow
      \href{https://gcc.gnu.org/}{GNU C compiler}
      & \href{https://gcc.gnu.org/}{GNU C compiler}
      & \href{https://www.gnu.org/software/guile}{GNU Guile}
      & \href{https://tug.org/texlive/}{\LaTeX{} distribtion}\\
      \oddrow
      \href{https://www.gnupg.org/related_software/libgcrypt/}{libgcrypt}
      & \href{https://www.gnupg.org/related_software/libgcrypt/}{libgcrypt}
      & \href{https://github.com/wingo/fibers}{Fibers}
      & \\
      \evenrow
      \href{http://www.librdf.org/}{\texttt{raptor2}}
      & \href{http://www.librdf.org/}{\texttt{raptor2}}
      &
      & \\
      \oddrow
      \href{http://www.htslib.org/}{HTSLib}
      &
      &
      & \\
    \end{tabularx}
    \caption{\small External tools required to build and run the programs this
      project provides.}
    \label{table:dependencies}
  \end{table}
  \hypersetup{urlcolor=LinkGray}

  The manual provides example commands to import RDF using
  \href{https://curl.haxx.se/}{cURL}.

\section{Setting up a build environment}

\subsection{Debian}

  Debian includes all tools, so use this command to install the
  build dependencies:

\begin{siderules}
\begin{verbatim}
apt-get install autoconf automake gcc make pkg-config libgcrypt-dev     \
                zlib-dev guile-2.0 guile-2.0-dev libraptor2-dev texlive \
                curl
\end{verbatim}
\end{siderules}

  The command has been tested on Debian 9.

\subsection{CentOS}

  CentOS 7 does not include \texttt{htslib}.  All other dependencies can
  be installed using the following command:

\begin{siderules}
\begin{verbatim}
yum install autoconf automake gcc make pkgconfig libgcrypt-devel \
            guile guile-devel raptor2-devel texlive curl
\end{verbatim}
\end{siderules}

\subsection{GNU Guix}

  If \href{https://www.gnu.org/software/guix}{GNU Guix} is available on your
  system, an environment that contains all external tools required to build
  the programs in this project can be obtained running the following command
  from the project's repository root:

\begin{siderules}
\begin{verbatim}
guix environment -l environment.scm
\end{verbatim}
\end{siderules}

\subsection{MacOS}

  The necessary dependencies to build \texttt{sparqling-genomics} can be
  installed using \href{https://brew.sh/}{homebrew}:

\begin{siderules}
\begin{verbatim}
brew install autoconf automake gcc make pkg-config libgcrypt guile \
             htslib curl raptor
\end{verbatim}
\end{siderules}

  The only missing dependency is a \LaTeX{} distribution.  But this is
  only needed to build this documentation.

  Building on MacOS has not been tested.  If you've tried it, please let
  us know, so we can attempt to support it in the future.

\section{Obtaining the source code}
\label{sec:obtaining-tarball}

  \begin{sloppypar}
  The source code can be downloaded at the
  \href{https://github.com/UMCUGenetics/sparqling-genomics/releases}%
  {Releases}%
  \footnote{\url{https://github.com/UMCUGenetics/sparqling-genomics/releases}}
  page.  Make sure to download the \mbox{\texttt{sparqling-genomics-0.99.7.tar.gz}}
  file.
  \end{sloppypar}

  Or, directly download the tarball using the command-line:
\begin{siderules}
\begin{verbatim}
curl -O https://github.com/UMCUGenetics/sparqling-genomics/releases/\
download/0.99.7/sparqling-genomics-0.99.7.tar.gz
\end{verbatim}
\end{siderules}

  After obtaining the tarball, it can be unpacked using the following commands:

\begin{siderules}
\begin{verbatim}
tar zxvf sparqling-genomics-0.99.7.tar.gz
cd sparqling-genomics-0.99.7
\end{verbatim}
\end{siderules}

\section{Installation instructions}

  After installing the required tools (see section \ref{sec:prerequisites}
  {\color{LinkGray}`\nameref{sec:prerequisites}'}), and obtaining the source
  code (see section \ref{sec:obtaining-tarball} {\color{LinkGray}
    `\nameref{sec:obtaining-tarball}'}), building involves running the following
  commands:

\begin{siderules}
\begin{verbatim}
autoreconf -vif # Only needed if the "./configure" step does not work.
./configure
make
make install
\end{verbatim}
\end{siderules}

  To run the \texttt{make install} command, super user privileges are possibly
  required.  This step can be ignored, but will keep the tools in the project's
  directory.  So, invoking \texttt{vcf2rdf} must be done using
  \texttt{tools/vcf2rdf/vcf2rdf} when inside the project's root directory,
  instead of ``just'' \texttt{vcf2rdf}.

Alternatively, the individual components can be built by replacing
\texttt{make \&\& make install} with \texttt{make -C <component-directory>}.
So, to only build \texttt{vcf2rdf}, the following command could be used:
\begin{siderules}
\begin{verbatim}
make -C tools/vcf2rdf
\end{verbatim}
\end{siderules}

\chapter{The knowledge graph}

  The tools provided by \texttt{sparqling-genomics} are designed to build a
  common format to express genomic information.  Each program reads data in
  a domain-specific format, and translates it into a common format; the
  Resource Description Framework (RDF).

  Programs can be categorized in layers.  A program belongs to the first
  layer (layer 0) when it translates a non-RDF format into RDF.  In the
  second layer (layer 1), we find programs that read RDF and generate more
  RDF.  Higher-level layers depend on the knowledge added by programs from
  the previous layer.

  In \texttt{sparqling-genomics}, the knowledge graph created by the programs
  is more important than the programs themselves.  When designing and
  implementing new programs, we should consider the added knowledge first.

  Furthermore, programs should not depend on programs, but on the knowledge
  produced by programs.  For example, the \texttt{vcf2rdf} program always
  writes genomic positions by using the \emph{FALDO} ontology.  An annotation
  program needs not to know about the existence of \texttt{vcf2rdf}, but it
  needs to know about the \emph{FALDO} ontology.  Therefore, the common
  interface between programs dealing with genomic positions is the \emph{FALDO}
  ontology.  This enables developers of the knowledge graph to understand
  the bigger picture without needing to understand the details of each
  program, or each individual data format.

  The next challenge is to describe knowledge in an integrative manner.  Again,
  \emph{FALDO} serves a good example: it describes a way of expressing knowledge
  that multiple programs can use; locations in a genome.  Developing effective
  ontologies means extracting common patterns in how information is described.
  This is an ever-ongoing process of refinement that changes over time with the
  knowledge that is most valuable to the researcher.

  With \texttt{sparqling-genomics}, we attempt to design a knowledge graph and
  provide the tools to practically implement it.  When improving
  \texttt{sparqling-genomics}, please always keep an eye out for the knowledge
  graph.

\section{Knowledge expressed by SPARQLing genomics tools}

  \begin{sloppypar}
  The \texttt{vcf2rdf} and \texttt{table2rdf} programs express knowledge using
  a unified pattern.  This overlap between the programs defines the
  \emph{ontology} for SPARQling genomics.  We wrote the ontology in the
  Terse RDF Triple Language (Turtle) format, and it can be found in the release
  tarball in \mbox{`\texttt{ontologies/sparqling-genomics.ttl}'}.
  \end{sloppypar}
