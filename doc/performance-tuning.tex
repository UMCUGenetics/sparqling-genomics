\chapter{Performance tuning}

  During the development and testing of this project, we found that tuning the
  Virtuoso triple store can improve the query performance significantly.
  Therefore, we address performance enhancements for Virtuoso in this chapter.

\section{Hardware}

  When choosing hardware for running a triple store, we attempt to maximize
  \emph{throughput} of the entire triple store.  This means that the slowest
  component of your hardware will determine the overall performance of the
  triple store.

\subsection{Disk lay-out}

\subsection{CPU utilization}

\subsection{Query performance}

\section{Virtuoso}

\subsection{Indexing schemes}

\subsubsection{Column-wise storage}

\begin{siderules}
\begin{verbatim}
CREATE TABLE DB.DBA.RDF_QUAD (
  G IRI_ID_8,
  S IRI_ID_8,
  P IRI_ID_8,
  O ANY,
  PRIMARY key (P, S, O, G) COLUMN
  );
ALTER INDEX RDF_QUAD ON DB.DBA.RDF_QUAD
  PARTITION (S int (0hexffff00));

CREATE DISTINCT NO PRIMARY KEY REF COLUMN INDEX RDF_QUAD_SP
  ON DB.DBA.RDF_QUAD (S, P)
  PARTITION (S int (0hexffff00));

CREATE COLUMN INDEX RDF_QUAD_POGS
  ON DB.DBA.RDF_QUAD (P, O, S, G)
  PARTITION (O varchar (-1, 0hexffff));

CREATE DISTINCT NO PRIMARY KEY REF COLUMN INDEX RDF_QUAD_GS
  ON DB.DBA.RDF_QUAD (G, S)
  PARTITION (S int (0hexffff00));

CREATE DISTINCT NO PRIMARY KEY REF COLUMN INDEX RDF_QUAD_OP
  ON DB.DBA.RDF_QUAD (O, P)
  PARTITION (O varchar (-1, 0hexffff));

CREATE BITMAP INDEX RDF_QUAD_PGOS ON DB.DBA.RDF_QUAD (G, P, O, S)
PARTITION (O VARCHAR (-1, 0hexffff));
\end{verbatim}
\end{siderules}

  If \texttt{predicate} and \texttt{graph} are given, but \texttt{subject} and
  \texttt{object} are not, the following index may speed up your queries
  significantly:

\begin{siderules}
\begin{verbatim}
CREATE BITMAP INDEX RDF_QUAD_PGOS
ON DB.DBA.RDF_QUAD (G, P, O, S)
PARTITION (O VARCHAR (-1, 0hexffff));
\end{verbatim}
\end{siderules}

